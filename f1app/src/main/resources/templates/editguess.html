<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
    xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity6">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link type="text/css" rel="stylesheet" href="/css/bootstrap.min.css" th:href="@{/css/bootstrap.min.css}" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <title>Teretulemast f1 maailmaan</title>
</head>

<body>


    <!-- HEADER -->
    <div class="container">
        <header class="d-flex flex-wrap justify-content-center py-3 mb-4 border-bottom">

            <ul class="nav nav-pills">
                <li class="nav-item"><a href="index" class="nav-link" aria-current="page">Home</a></li>
                <li class="nav-item"><a href="guesslist" class="nav-link">Guesses</a></li>
                <li class="nav-item"><a href="selectlaps" class="nav-link">Laptimes</a></li>
                <li class="nav-item"><a href="newguess" class="nav-link active">New Guess</a></li>
                <form th:action="@{/logout}" method="post">
                    <input type="submit" value="Sign Out" class="btn btn-sm btn-danger" />
                </form>
            </ul>
        </header>
    </div>

    <!-- https://getbootstrap.com/docs/3.4/css/ Täällä dokumentaatio -->

    <!-- TEKSTI -->
    <h1>
        Use Admin power to edit guesses!
    </h1>
    <h3>
        If you want to change your selection, select first "Select Position for driver"
        and then select the new value!
    </h3>



    <form method="POST" action="#" th:action="@{/editguess}" th:object=${guess}>
        <input type="hidden" th:field="*{id}" />

        <p>Tekijä: <input type="text" th:field="${guess.guessMaker}" /></p>
        <p th:if="${#fields.hasErrors('guessMaker')}" th:errors="*{guessMaker}">Error</p>


        <p>Ver:
            <select class="dropdown" th:field="${guess.verGuess}">
                <option value="">Select Position for driver</option>
                <th:block th:each="i: ${#numbers.sequence(1, 20)}">
                    <option th:value="${i}" th:text="${i}"></option>
                </th:block>
            </select>
        </p>

        <p>Per:
            <select class="dropdown" th:field="${guess.perGuess}">
                <option value="">Select Position for driver</option>
                <th:block th:each="i: ${#numbers.sequence(1, 20)}">
                    <option th:value="${i}" th:text="${i}"></option>
                </th:block>
            </select>
        </p>

        <p>Lec:
            <select class="dropdown" th:field="${guess.lecGuess}">
                <option value="">Select Position for driver</option>
                <th:block th:each="i: ${#numbers.sequence(1, 20)}">
                    <option th:value="${i}" th:text="${i}"></option>
                </th:block>
            </select>
        </p>

        <p>Sai:
            <select class="dropdown" th:field="${guess.saiGuess}">
                <option value="">Select Position for driver</option>
                <th:block th:each="i: ${#numbers.sequence(1, 20)}">
                    <option th:value="${i}" th:text="${i}"></option>
                </th:block>
            </select>
        </p>

        <p>Pia:
            <select class="dropdown" th:field="${guess.piaGuess}">
                <option value="">Select Position for driver</option>
                <th:block th:each="i: ${#numbers.sequence(1, 20)}">
                    <option th:value="${i}" th:text="${i}"></option>
                </th:block>
            </select>
        </p>

        <p>Nor:
            <select class="dropdown" th:field="${guess.norGuess}">
                <option value="">Select Position for driver</option>
                <th:block th:each="i: ${#numbers.sequence(1, 20)}">
                    <option th:value="${i}" th:text="${i}"></option>
                </th:block>
            </select>
        </p>

        <p>Rus:
            <select class="dropdown" th:field="${guess.rusGuess}">
                <option value="">Select Position for driver</option>
                <th:block th:each="i: ${#numbers.sequence(1, 20)}">
                    <option th:value="${i}" th:text="${i}"></option>
                </th:block>
            </select>
        </p>

        <p>Ham:
            <select class="dropdown" th:field="${guess.hamGuess}">
                <option value="">Select Position for driver</option>
                <th:block th:each="i: ${#numbers.sequence(1, 20)}">
                    <option th:value="${i}" th:text="${i}"></option>
                </th:block>
            </select>
        </p>

        <p>Alo:
            <select class="dropdown" th:field="${guess.aloGuess}">
                <option value="">Select Position for driver</option>
                <th:block th:each="i: ${#numbers.sequence(1, 20)}">
                    <option th:value="${i}" th:text="${i}"></option>
                </th:block>
            </select>
        </p>

        <p>Str:
            <select class="dropdown" th:field="${guess.strGuess}">
                <option value="">Select Position for driver</option>
                <th:block th:each="i: ${#numbers.sequence(1, 20)}">
                    <option th:value="${i}" th:text="${i}"></option>
                </th:block>
            </select>
        </p>

        <p>Tsu:
            <select class="dropdown" th:field="${guess.tsuGuess}">
                <option value="">Select Position for driver</option>
                <th:block th:each="i: ${#numbers.sequence(1, 20)}">
                    <option th:value="${i}" th:text="${i}"></option>
                </th:block>
            </select>
        </p>

        <p>Ric:
            <select class="dropdown" th:field="${guess.ricGuess}">
                <option value="">Select Position for driver</option>
                <th:block th:each="i: ${#numbers.sequence(1, 20)}">
                    <option th:value="${i}" th:text="${i}"></option>
                </th:block>
            </select>
        </p>

        <p>Hul:
            <select class="dropdown" th:field="${guess.hulGuess}">
                <option value="">Select Position for driver</option>
                <th:block th:each="i: ${#numbers.sequence(1, 20)}">
                    <option th:value="${i}" th:text="${i}"></option>
                </th:block>
            </select>
        </p>

        <p>Mag:
            <select class="dropdown" th:field="${guess.magGuess}">
                <option value="">Select Position for driver</option>
                <th:block th:each="i: ${#numbers.sequence(1, 20)}">
                    <option th:value="${i}" th:text="${i}"></option>
                </th:block>
            </select>
        </p>

        <p>Alb:
            <select class="dropdown" th:field="${guess.albGuess}">
                <option value="">Select Position for driver</option>
                <th:block th:each="i: ${#numbers.sequence(1, 20)}">
                    <option th:value="${i}" th:text="${i}"></option>
                </th:block>
            </select>
        </p>

        <p>Sar:
            <select class="dropdown" th:field="${guess.sarGuess}">
                <option value="">Select Position for driver</option>
                <th:block th:each="i: ${#numbers.sequence(1, 20)}">
                    <option th:value="${i}" th:text="${i}"></option>
                </th:block>
            </select>
        </p>

        <p>Bot:
            <select class="dropdown" th:field="${guess.botGuess}">
                <option value="">Select Position for driver</option>
                <th:block th:each="i: ${#numbers.sequence(1, 20)}">
                    <option th:value="${i}" th:text="${i}"></option>
                </th:block>
            </select>
        </p>

        <p>Zho:
            <select class="dropdown" th:field="${guess.zhoGuess}">
                <option value="">Select Position for driver</option>
                <th:block th:each="i: ${#numbers.sequence(1, 20)}">
                    <option th:value="${i}" th:text="${i}"></option>
                </th:block>
            </select>
        </p>

        <p>Gas:
            <select class="dropdown" th:field="${guess.gasGuess}">
                <option value="">Select Position for driver</option>
                <th:block th:each="i: ${#numbers.sequence(1, 20)}">
                    <option th:value="${i}" th:text="${i}"></option>
                </th:block>
            </select>
        </p>

        <p>Oco:
            <select class="dropdown" th:field="${guess.ocoGuess}">
                <option value="">Select Position for driver</option>
                <th:block th:each="i: ${#numbers.sequence(1, 20)}">
                    <option th:value="${i}" th:text="${i}"></option>
                </th:block>
            </select>
        </p>

        <input type="submit" value="save edit!" />
    </form>

    <script>

        // Luo muuttujan joka pitää huolen että samaa lukua ei voi valita uudelleen
        // https://jsfiddle.net/a2amhqL3/
        $(function () {
            var removedOptions = {};
            $('.dropdown').change(function () {
                var dropdownval = $(this).val();

                if (dropdownval !== "") {
                    $('.dropdown').not(this).find('option[value="' + dropdownval + '"]').remove();

                    removedOptions[this.id] = dropdownval;
                } else {
                    var id = this.id;
                    if (removedOptions[id]) {
                        var option = '<option value="' + removedOptions[id] + '">' + removedOptions[id] + '</option>';
                        $('.dropdown').not(this).append(option);
                        delete removedOptions[id];
                    }
                }
            });
        });

    </script>


</body>

</html>