<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link type="text/css" rel="stylesheet" href="/css/bootstrap.min.css" th:href="@{/css/bootstrap.min.css}" />
    <title>Teretulemast f1 maailmaan</title>
</head>

<body>
    <!-- HEADER -->
    <div class="container">
        <header class="d-flex flex-wrap justify-content-center py-3 mb-4 border-bottom">

            <ul class="nav nav-pills">
                <li class="nav-item"><a href="index" class="nav-link" aria-current="page">Home</a></li>
                <li class="nav-item"><a href="guesslist" class="nav-link">Guesses</a></li>
                <li class="nav-item"><a href="selectlaps" class="nav-link active">Laptimes</a></li>
                <li class="nav-item"><a href="newguess" class="nav-link">New Guess</a></li>
                <li class="nav-item list-group-item-danger "><a href="#" class="nav-link">Log out</a></li>
            </ul>
        </header>
    </div>

    <!-- https://getbootstrap.com/docs/3.4/css/ Täällä dokumentaatio -->

    <!-- TEKSTI -->
    <div class="container">
        <h1>
            LAPTIMES 2222222222222222
        </h1>

        <h1>Selected Race and Driver</h1>

        <!-- TOIMIVAT!!!! -->
        <!--         <h2>Selected Driver ID: <span th:text="${selectedDriverId}"></span></h2>
        <h2>Selected Race ID: <span th:text="${selectedRaceId}"></span></h2>-->
        <h2>Selected DRIVER OBJECT: <span th:text="${DRIVER}"></span></h2>
        <h2>Selected RACE OBJECT: <span th:text="${RACE}"></span></h2> 
        <h2>Selected driver: <span th:text="${DRIVER.firstName + ' ' + DRIVER.lastName}"></span></h2>
        <h2>Selected race: <span th:text="${RACE.name}"></span></h2>

        <table class="table table-bordered" style="padding: 40px;">
            <tr>
                <th>Lapcount</th>
                <th>Driver</th>
                <th>Laptimes</th>

            </tr>
            <tr th:each="lap, i : ${Laps}">
                <td>
                    <span th:text="${i.index + 1}"></span>
                </td>
                <td>
                    <span th:text="${lap.driver.firstName}"></span>
                </td>
                <!--                 <td>
                    <span th:text="${lap.lapTime}"></span>
                </td> -->
                <td>
                    <!-- <span th:if="${RACE.raceId == lap.race.raceId}" th:text="${lap.lapTime}"></span> -->
                    <span th:text="${lap.lapTime}"></span>
                </td>
                <input type="hidden" id="lapTimes" name="lapTimes" th:value="${#strings.arrayJoin(Laps.![lapTime], ',')}" />
            </tr>
        </table>

    </div>

    <div id="lapTimesDisplay"></div>
    <script>
        // Function to display lap times
        function displayLapTimes() {
            // Get lap times from hidden input
            var lapTimesInput = document.getElementById('lapTimes');
            var lapTimes = lapTimesInput.value.split(',');

            // Clear previous content
            var lapTimesDisplay = document.getElementById('lapTimesDisplay');
            lapTimesDisplay.innerHTML = '';

            // Display each lap time
            lapTimes.forEach(function(lapTime) {
                var lapTimeSpan = document.createElement('span');
                lapTimeSpan.textContent = lapTime;
                lapTimesDisplay.appendChild(lapTimeSpan);
                lapTimesDisplay.appendChild(document.createElement('br'));
            });
        }

        // Call the function when the page loads
        displayLapTimes();
    </script>
</body>

</html>